TODO: (martin) add controllers to this directive